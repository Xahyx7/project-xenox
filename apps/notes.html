<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes - Smart Book</title>
    <link rel="stylesheet" href="../css/notes.css">
    <meta name="theme-color" content="#1B1B1D">
</head>
<body>
    <div class="notes-app">
        <!-- Main Sidebar -->
        <div class="sidebar" id="sidebar">
            <!-- Sidebar Toggle Button -->
            <button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebar()">
                <span id="toggleIcon">‹</span>
            </button>

            <!-- Sidebar Header -->
            <div class="sidebar-header">
                <div class="sidebar-title">Notes</div>
                <button class="add-btn" onclick="createNewNote()" title="New Note">+</button>
            </div>

            <!-- Subjects Section -->
            <div class="subjects-section">
                <div class="section-title">
                    Subjects
                    <button class="add-btn small" onclick="showAddSubjectModal()" title="Add Subject">+</button>
                </div>
                <div id="subjectsList">
                    <!-- Subjects loaded by JS -->
                </div>
            </div>

            <!-- Notes List -->
            <div class="notes-list" id="notesList">
                <!-- Notes loaded by JS -->
            </div>
        </div>

        <!-- Subject Notes Flyout -->
        <div class="notes-flyout" id="notesFlyout">
            <div class="flyout-header">
                <span id="flyoutSubjectName">Subject Notes</span>
                <button class="flyout-close" onclick="closeNotesFlyout()">×</button>
            </div>
            <div class="flyout-content">
                <div class="flyout-notes-list" id="flyoutNotesList">
                    <!-- Subject notes loaded by JS -->
                </div>
            </div>
        </div>

        <!-- Editor Area -->
        <div class="editor-area" id="editorArea">
            <!-- Toolbar -->
            <div class="editor-toolbar">
                <button class="back-btn" onclick="goHome()" title="Back to Home">←</button>
                <button class="sidebar-btn mobile-only" onclick="toggleSidebar()" title="Toggle Sidebar">☰</button>
                <input type="text" class="title-input" id="titleInput" placeholder="Untitled Note">
                
                <div class="tool-group">
                    <button class="tool-btn" id="textModeBtn" onclick="setMode('text')" title="Text Mode">Text</button>
                    <button class="tool-btn active" id="drawModeBtn" onclick="setMode('draw')" title="Draw Mode">Draw</button>
                </div>

                <div class="tool-group" id="drawingTools">
                    <button class="tool-btn active" onclick="setTool('pen')" data-tool="pen" title="Pen">✏️</button>
                    <button class="tool-btn" onclick="setTool('highlighter')" data-tool="highlighter" title="Highlighter">ߖ️</button>
                    <button class="tool-btn" onclick="setTool('eraser')" data-tool="eraser" title="Eraser">ߧ</button>
                </div>

                <div class="color-picker" id="colorPicker">
                    <div class="color-btn active" style="background: #000" onclick="setColor('#000')" data-color="#000" title="Black"></div>
                    <div class="color-btn" style="background: #007AFF" onclick="setColor('#007AFF')" data-color="#007AFF" title="Blue"></div>
                    <div class="color-btn" style="background: #FF3B30" onclick="setColor('#FF3B30')" data-color="#FF3B30" title="Red"></div>
                    <div class="color-btn" style="background: #34C759" onclick="setColor('#34C759')" data-color="#34C759" title="Green"></div>
                    <div class="color-btn" style="background: #FF9500" onclick="setColor('#FF9500')" data-color="#FF9500" title="Orange"></div>
                    <div class="color-btn" style="background: #AF52DE" onclick="setColor('#AF52DE')" data-color="#AF52DE" title="Purple"></div>
                </div>

                <div class="tool-group">
                    <input type="range" class="size-slider" id="sizeSlider" min="1" max="20" value="3" onchange="setBrushSize(this.value)" title="Brush Size">
                    <span class="size-display" id="sizeDisplay">3px</span>
                </div>

                <div class="tool-group">
                    <button class="tool-btn" onclick="undoAction()" title="Undo">↶</button>
                    <button class="tool-btn" onclick="clearCanvas()" title="Clear Canvas">ߗ️</button>
                </div>
            </div>

            <!-- Canvas Container -->
            <div class="canvas-container" id="canvasContainer">
                <canvas class="drawing-canvas" id="drawingCanvas"></canvas>
                <textarea class="text-editor" id="textEditor" placeholder="Start writing your notes here..." style="display: none;"></textarea>
            </div>

            <!-- Empty State -->
            <div class="empty-state" id="emptyState">
                <div class="empty-icon">ߓ</div>
                <h3>Select a note to start editing</h3>
                <p>Choose a note from the sidebar or create a new one</p>
            </div>
        </div>
    </div>

    <!-- Add Subject Modal -->
    <div class="modal" id="addSubjectModal">
        <div class="modal-content">
            <div class="modal-title">Add New Subject</div>
            <input type="text" class="modal-input" id="subjectInput" placeholder="Enter subject name">
            <div class="modal-actions">
                <button class="modal-btn secondary" onclick="hideModal()">Cancel</button>
                <button class="modal-btn primary" onclick="addSubject()">Add Subject</button>
            </div>
        </div>
    </div>

    <script src="../js/notes.js"></script>
</body>
</html>
